<table mat-table [dataSource]="dataSource" multiTemplateDataRows matSort class="mat-elevation-z8">
  <ng-container *ngIf="router.url.indexOf('/post-list') !== -1">
    <!-- ID Column -->
  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Post title</th>
    <td mat-cell *matCellDef="let element">
      <a class="postTitle" (click)="postDetail(element)">
        {{element.title}}
      </a>
    </td>
  </ng-container>

  <!-- Name Column -->
  <ng-container matColumnDef="description">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Post Description</th>
    <td mat-cell *matCellDef="let element">
      {{element.description}}
    </td>
  </ng-container>

  <!-- Branch Column -->
  <ng-container matColumnDef="created_user">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Posted User</th>
    <td mat-cell *matCellDef="let element">
      <div *ngIf="element?.created_user_id?.name">
        {{element?.created_user_id?.name}}
      </div>

      <div *ngIf="!element?.created_user_id?.name">
        {{element?.updated_user_id?.name}}
      </div>
    </td>
  </ng-container>

  <!-- created At Column -->
  <ng-container matColumnDef="created_at">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Posted Date</th>
    <td mat-cell *matCellDef="let element">{{element.createdAt | date: 'yyyy/MM/dd a' }}
    </td>
  </ng-container>

  <!-- Action Column -->
  <ng-container matColumnDef="operation">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Operation</th>
    <td mat-cell *matCellDef="let element">
      <button mat-raised-button color="primary" [routerLink]="['/update-post', element._id]">
        Edit
      </button>
      <button mat-raised-button (click)="deletePost(element)" class="delete-btn">
        Delete
      </button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="columnToDisplayPost"></tr>
  <tr mat-row *matRowDef="let row; columns: columnToDisplayPost;"></tr>
  </ng-container>

  <ng-container *ngIf="router.url.indexOf('/user-list') !== -1">

  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Name</th>
    <td mat-cell *matCellDef="let user">
      <a class="username" (click)="userDetail(user)" >
        {{user.name}}
      </a>
    </td>
  </ng-container>

  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Email</th>
    <td mat-cell *matCellDef="let user">{{user.email}}
    </td>
  </ng-container>

  <ng-container matColumnDef="created_user">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Created User</th>
    <td mat-cell *matCellDef="let user">{{user?.created_username}}
    </td>
  </ng-container>

  <ng-container matColumnDef="type">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Type</th>
    <td mat-cell *matCellDef="let user">{{user.type}}
    </td>
  </ng-container>

  <ng-container matColumnDef="phone">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Phone</th>
    <td mat-cell *matCellDef="let user">{{user.phone}}
    </td>
  </ng-container>

  <ng-container matColumnDef="dob">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Dob</th>
    <td mat-cell *matCellDef="let user">{{user.dob | date:"yyyy/MM/dd"}}
    </td>
  </ng-container>

  <ng-container matColumnDef="address">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Address</th>
    <td mat-cell *matCellDef="let user">{{user.address}}</td>
  </ng-container>

  <ng-container matColumnDef="created_at">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Created Date</th>
    <td mat-cell *matCellDef="let user">{{user.createdAt | date:"yyyy/MM/dd"}}</td>
  </ng-container>

  <ng-container matColumnDef="updated_at">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Updated Date</th>
    <td mat-cell *matCellDef="let user">{{user.updatedAt | date:"yyyy/MM/dd"}}</td>
  </ng-container>

  <ng-container matColumnDef="operation">
    <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Operation</th>
    <td mat-cell *matCellDef="let user">
      <button mat-raised-button (click)="updateUser(user)" color="primary">
        Edit
      </button>
      <button mat-raised-button (click)="deleteUser(user)" class="delete-btn">
        Delete
      </button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="columnToDisplayUser"></tr>
  <tr mat-row *matRowDef="let row; columns: columnToDisplayUser;"></tr>
  </ng-container>
</table>
